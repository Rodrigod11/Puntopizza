spring.application.name=backend

# =======================
# Render PORT (obligatorio)
# Render define PORT (default 10000) y tu app debe escuchar ese puerto
# =======================
server.port=${PORT:8080}
server.address=0.0.0.0

# =======================
# Datasource (MySQL)
# - En Render NO uses localhost.
# - Configura estas variables en Render:
#   SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME, SPRING_DATASOURCE_PASSWORD
# =======================
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# =======================
# Uploads
# OJO: el filesystem de Render es EFÍMERO fuera de tu disk mount.
# Si usas Persistent Disk, monta por ejemplo /var/data y guarda ahí.
# =======================
file.upload-dir=${UPLOAD_DIR:/var/data/uploads}

spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# =======================
# JPA / Hibernate
# En producción normalmente NO conviene show-sql en true
# =======================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# =======================
# CORS (Angular)
# Configura en Render:
#   CORS_ALLOWED_ORIGINS=https://tu-frontend.netlify.app
# (puedes poner varios separados por coma)
# =======================
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:4200}

# =======================
# JWT (REQUERIDO)
# Configura en Render:
#   JWT_SECRET (>= 32 bytes)
# =======================
app.jwt.secret=${JWT_SECRET}
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:604800000}

# =======================
# Mail (opcional)
# NO guardes credenciales aquí; usa variables en Render
# =======================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:}
spring.mail.password=${MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_STARTTLS:true}
spring.mail.default-encoding=UTF-8
app.mail.from=${MAIL_FROM:Pizzería <no-reply@pizzeria.com>}

# =======================
# Logging (prod)
# =======================
logging.level.org.springframework.security=INFO
logging.level.com.pizzeria.backend=INFO